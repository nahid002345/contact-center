@model CCMEMOMASTER


<link href="~/Content/CustomeTheme/pages/fileinput.min.css" rel="stylesheet" />
<script src="~/Scripts/CustomeJS/fileinput.min.js"></script>
<script>

</script>

<!-- BEGIN PAGE CONTENT-->
<div class="row">
    <div class="col-md-12">
        <div class="portlet">
            @if (Model != null)
            {
                <div class="portlet-title">
                    <div class="caption">
                        <i class="icon-book-open"></i>CRM View
                        @if (Model.CCENUMERATION2.NAME.ToLower().Trim().Contains("high"))
                        {
                            <span class="label label-danger"><b>@Model.CCENUMERATION2.NAME</b><i class="icon-bell"></i></span>
                        }
                        @if (Model.CCENUMERATION2.NAME.ToLower().Trim().Contains("medium"))
                        {
                            <span class="label label-warning"><b>@Model.CCENUMERATION2.NAME</b><i class="icon-bell"></i></span>
                        }
                        @if (Model.CCENUMERATION2.NAME.ToLower().Trim().Contains("low"))
                        {
                            <span class="label label-info"><b>@Model.CCENUMERATION2.NAME</b><i class="icon-bell"></i></span>
                        }
                    </div>
                </div>
                <div class="portlet-body">
                    <div class="note note-success">
                        <div class="row">
                            <div class="col-sm-12 control-label">
                                <span class="fa  fa-user"></span>Ticket Generated By : <b>@Model.CCUSER.EMPLOYEENAME (@Model.CCUSER.CCGROUP.GROUPNAME)</b> <span class="fa fa-calendar"></span>  @Model.CREATEDON
                            </div>
                        </div>
                    </div>
                    <div class="note note-info">
                        <div class="row">
                            <div class="col-sm-3">
                                <span class="fa  fa-ticket"></span>Ticket No : <b>@Model.TICKETNO</b>
                            </div>
                            <label class="col-md-3 control-label">
                                Memo Type:
                                <span class="label label-danger"><b>@Model.CCENUMERATION1.NAME</b></span>
                            </label>
                            <label class="col-md-2 control-label">
                                Memo Status:
                                @if (Model.ISOPEN)
                                { <span class="label label-info"><b> OPEN </b></span>}
                                else
                                {<span class="label label-danger"><b>CLOSE</b></span>}
                            </label>

                            <div class="col-sm-2">
                                <span class=" icon-cursor"></span>Last Action :<span class="label label-info"> <b>@Model.CCENUMERATION.NAME </b></span>
                            </div>
                            <label class="col-sm-3 control-label">
                                Last Assign Group
                                <span class="label label-warning"><b>@Model.CCGROUP.GROUPNAME</b></span>
                            </label>

                        </div>
                        <div class="row">

                        </div>
                    </div>
                    <div class="tabbable">
                        <ul class="nav nav-tabs">
                            <li class="active">
                                <a href="#vwtab_info" data-toggle="tab">Information </a>
                            </li>
                            <li>
                                <a href="#vwtab_attach" data-toggle="tab">Attachment <span class="badge badge-success">@Model.CCMEMOATTACHMENTs.Count</span></a>
                            </li>
                            <li>
                                <a href="#vwtab_history" data-toggle="tab">History <span class="badge badge-success">@Model.CCMEMOLOGs.Count</span> </a>
                            </li>

                        </ul>
                        <div class="tab-content no-space">
                            <div class="tab-pane active" id="vwtab_info">
                                <div class="form-body">
                                    <div class="panel panel-info">
                                        <div class="panel-body">
                                            @*<div class="note note-success">
                                                    <span class="fa  fa-ticket"></span><b>Customer Info</b>
                                                </div>*@
                                            <div class="row panel-info">
                                                <div class="form-group">
                                                    <label class="col-md-2 control-label">Customer Name</label>
                                                    <div class="col-md-4">
                                                        <label class="control-label sale-num">: @Model.CUSTOMERNAME</label>
                                                    </div>
                                                    <label class="col-md-2 control-label">Contact No</label>
                                                    <div class="col-md-4">
                                                        <label class="control-label sale-num">: @Model.CUSTOMERCONTACT</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row panel-info">
                                                <div class="form-group">
                                                    <label class="col-md-2 control-label label-icon">A/C No</label>
                                                    <div class="col-md-4">
                                                        <label class="control-label sale-num">: @Model.CUSTACNO</label>
                                                    </div>
                                                    <label class="col-md-2 control-label">Card No</label>
                                                    <div class="col-md-4">
                                                        <label class="control-label sale-num">: @Model.CUSTCARDNO</label>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="form-group">
                                                    <label class="col-md-2 control-label">Request Details</label>
                                                    <div class="col-md-10">
                                                        <label class="control-label">: @Model.REQUESTDETAILS</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="panel-body">
                                            @*<div class="note note-success">
                                                    <span class="fa  fa-ticket"></span><b>Details</b>
                                                </div>*@
                                            <div class="row">
                                                <div class="form-group">
                                                    <label class="col-md-2 control-label">Call Catagory</label>
                                                    <div class="col-md-4">
                                                        <label class="control-label">: @Model.CCCALLCATAGORY.NAME</label>
                                                    </div>
                                                    <label class="col-md-2 control-label">Call Types</label>
                                                    <div class="col-md-4">
                                                        <label class="control-label">: @Model.CCCALLTYPE.TYPENAME</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group">
                                                    <label class="col-md-2 control-label">Source Type</label>
                                                    <div class="col-md-4">
                                                        <label class="control-label">: @Model.CCENUMERATION4.NAME</label>
                                                    </div>
                                                    <label class="col-md-2 control-label">Product Type</label>
                                                    <div class="col-md-4">
                                                        <label class="control-label">: @Model.CCENUMERATION3.NAME</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group">
                                                    <label class="col-md-2 control-label">Action Details</label>
                                                    <div class="col-md-10">
                                                        <label class="control-label">: @Model.LASTACTIONDETAILS</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="vwtab_attach">
                                <div class="portlet box green">
                                    <div class="portlet-title">
                                        <div class="caption">
                                            <i class="fa fa-cogs"></i>Attachment List
                                        </div>
                                    </div>
                                    <div class="portlet-body" style="display: block;">
                                        @if (Model.CCMEMOATTACHMENTs != null && Model.CCMEMOATTACHMENTs.Count > 0)
                                        {
                                            var fileDowngrid = new WebGrid(Model.CCMEMOATTACHMENTs, rowsPerPage: 10, canPage: false, canSort: false, ajaxUpdateContainerId: "detailInfo");
                                            //fileDowngrid.PagerList(WebGridPagerModes.All, paginationStyle: "Pagination");
                                            @fileDowngrid.GetHtml(
                                                    tableStyle: "table table-bordered table-striped table-condensed flip-content",
                                                    headerStyle: "flip-content",
                                                    columns: new[]{
                                                    fileDowngrid.Column("ID",header: "ID"),
                                                    fileDowngrid.Column("FILENAME",header: "File Name"),
                                                    fileDowngrid.Column("CREATEDBY",header: "Uploaded By"),
                                                    fileDowngrid.Column("", "Action", format: @<a href="@Url.Action("DownloadFiles","CRM", new { id = @item.ID})" class="btn green downloadFile" data-id="@item.ID">Download<i class="fa fa-download"></i></a>)
                                                    @*fileDowngrid.Column("", "Action", format: @<a href="/CRM/DownloadFiles/@item.ID" class="btn green downloadFile" data-id="@item.ID">Download<i class="fa fa-download"></i></a>)*@
                                                },
                                                                              mode: WebGridPagerModes.All
                                                                              );
                                        }
                                        else
                                        {
                                            <div class="note note-warning">
                                                <h4 class="block"><span class="fa fa-warning"></span>No result found </h4>
                                            </div>
                                        }
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="vwtab_history">
                                <div class="portlet box red">
                                    <div class="portlet-title">
                                        <div class="caption">
                                            <i class="fa fa-cogs"></i>Action History
                                        </div>
                                        <div class="tools">
                                            <a href="javascript:;" class="collapse" data-original-title="" title=""></a>
                                        </div>
                                    </div>
                                    <div class="portlet-body" style="display: block;">
                                        <div class="table-scrollable">
                                            @if (Model.CCMEMOLOGs != null && Model.CCMEMOLOGs.Count > 0)
                                            {
                                                var historyGrid = new WebGrid(Model.CCMEMOLOGs, rowsPerPage: 10, canPage: false, canSort: false, ajaxUpdateContainerId: "detailInfo");
                                                // historyGrid.PagerList(WebGridPagerModes.All, paginationStyle: "Pagination");
                                                @historyGrid.GetHtml(
                                                    tableStyle: "table table-bordered table-striped table-condensed flip-content",
                                                    headerStyle: "flip-content",
                                                    columns: new[]{
                                                    historyGrid.Column("ID",header: "ID"),
                                                    historyGrid.Column("CCUSER.EMPLOYEENAME",header: "Acted By"),
                                                    //historyGrid.Column("CCUSER.CCGROUP.GROUPNAME",header: "Requested From"),
                                                    historyGrid.Column("CREATEDON",header: "Action Date"),
                                                    historyGrid.Column("CCENUMERATION.NAME",header: "Action"),
                                                    historyGrid.Column("ACTIONDETAILS",header: "Details"),
                                                    historyGrid.Column("CCGROUP.GROUPNAME",header: "Group")
                                                },
                                                 mode: WebGridPagerModes.All
                                                 );
                                            }
                                            else
                                            {
                                                <div class="note note-warning">
                                                    <h4 class="block"><span class="fa fa-warning"></span>No result found </h4>
                                                </div>
                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            }
            else
            {
                <div class="note note-info">
                    <div class="col-sm-3">
                        <span class="fa  fa-warning"></span>No Information Found. Please Check...
                    </div>

                </div>
            }
        </div>


    </div>
</div>
